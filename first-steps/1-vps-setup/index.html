<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-root" content="/selfhost-guides">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="3.0.3.739634228798">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 3.0.3">

    <!-- Primary Meta Tags -->
    <title>Initial VPS Setup | Selfhost Guides</title>
    <meta name="title" content="Initial VPS Setup | Selfhost Guides">
    <meta name="description" content="Basic knowledge in Terminal and Linux CLI usage" />

    <!-- Canonical -->
    <link rel="canonical" href="https://justrainer.github.io/selfhost-guides/first-steps/1-vps-setup/" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://justrainer.github.io/selfhost-guides/first-steps/1-vps-setup/">
    <meta property="og:title" content="Initial VPS Setup | Selfhost Guides">
    <meta property="og:description" content="Basic knowledge in Terminal and Linux CLI usage">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://justrainer.github.io/selfhost-guides/first-steps/1-vps-setup/">
    <meta property="twitter:title" content="Initial VPS Setup | Selfhost Guides">
    <meta property="twitter:description" content="Basic knowledge in Terminal and Linux CLI usage">

    <script>(function () { var el = document.documentElement, m = localStorage.getItem("/selfhost-guides/doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="../../resources/css/retype.css?v=3.0.3.739634228798" rel="stylesheet" />

    <script type="text/javascript" src="../../resources/js/config.js?v=3.0.3.739634228798" data-turbo-eval="false" defer></script>
    <script type="text/javascript" src="../../resources/js/retype.js?v=3.0.3" data-turbo-eval="false" defer></script>
    <script id="lunr-js" type="text/javascript" src="../../resources/js/lunr.js?v=3.0.3.739634228798" data-turbo-eval="false" defer></script>
</head>
<body>
    <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
        <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>
    
        <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
            <div class="container relative flex items-center justify-between grow pr-6 md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="docs-sidebar-toggle"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="docs-site-logo" href="../../" class="flex items-center leading-snug text-xl">
                            <span class="dark:text-white font-semibold line-clamp-1 md:line-clamp-2">Selfhost Guides</span>
                        </a><span class="hidden px-2 py-1 ml-4 text-sm font-semibold leading-none text-root-logo-label-text bg-root-logo-label-bg rounded-sm md:inline-block">Beta</span>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                            
                        </ul>
                    </nav>
        
                    <!-- Header Right Skeleton -->
                    <div v-cloak class="flex justify-end grow skeleton">
        
                        <!-- Search input mock -->
                        <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                            <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                            </div>
        
                            <input class="w-full h-10 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 placeholder-gray-400 dark:placeholder-dark-400"
                            style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search" />
                        </div>
        
                        <!-- Mobile search button mock -->
                        <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                        </div>
        
                        <!-- Dark mode switch placehokder -->
                        <div class="w-10 h-10 lg:ml-2"></div>
        
                        <!-- History button mock -->
                        <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                        </div>
                    </div>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="docs-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
        <div class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">
            
                <!-- Render this div, if config.showSidebarFilter is `true` -->
                <div class="flex items-center h-16 px-6">
                    <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter" />
                </div>
            
                <div class="pl-6 mb-4 mt-1">
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                </div>
            
                <div class="shrink-0 mt-auto bg-transparent dark:border-dark-650">
                    <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                        <span class="text-xs whitespace-nowrap">Powered by</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                    </a>
                </div>
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650">
            
                        <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                            <span class="text-xs whitespace-nowrap">Powered by</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                        </a>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 dark:bg-dark-850">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div class="min-w-0 p-4 grow md:px-16">
                        <main class="relative pb-12 lg:pt-2">
                            <div class="docs-markdown" id="docs-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="docs-sidebar-right-toggle"></div>
                
                                <!-- Page content  -->
<doc-anchor-target id="initial-vps-setup" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#initial-vps-setup">#</doc-anchor-trigger>
        <span>Initial VPS Setup</span>
    </h1>
</doc-anchor-target>
<doc-anchor-target id="prerequisites">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#prerequisites">#</doc-anchor-trigger>
        <span>Prerequisites</span>
    </h2>
</doc-anchor-target>
<ul>
<li>Basic knowledge in Terminal and Linux CLI usage</li>
<li>Very basic knowledge of networking</li>
<li><strong>5-10 $ a month</strong> for the server</li>
<li><strong>5-15 $ a year</strong> for the domain name</li>
<li>You will create multiple accounts, for buying your domain, renting your server, and securing your VPS with Cloudflare</li>
</ul>
<doc-anchor-target id="getting-a-domain">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#getting-a-domain">#</doc-anchor-trigger>
        <span>Getting a Domain</span>
    </h2>
</doc-anchor-target>
<p>In order to properly use Vaultwarden (or any other services you&#x27;d be hosting on your server), you need a domain name. This can be pretty much anything you want that hasn&#x27;t been used yet. There are countless vendors for domain names, which is why I like to use <a href="https://tld-list.com/">TLD-List</a> as a starting point. You&#x27;ll probably want to set the filters to something like</p>
<ul>
<li><strong>Cheapest Register Price:</strong> 0-20</li>
<li><strong>Character Count:</strong> 2-6</li>
<li><strong>Domain Level:</strong> Top-level domains</li>
<li><strong>WHOIS Privacy:</strong> Supported</li>
<li><strong>TLD Phase:</strong> In General Availability</li>
</ul>
<p>Now, you can brainstorm some ideas how you could call your domain, enter it into the search box up top, and see both what that domain name would cost with different TLDs, as well as if they&#x27;re still available. <strong>Keep in mind</strong> that not only the registering price matters - you&#x27;ll have to renew the domain at some point, usually after a year. Don&#x27;t fall for a cheap registrar price that renews at 3-10x that!</p>
<p><strong>Additionally</strong>, when you found a TLD you like, click on its&#x27; label to see the list of available registrars. You should look for one that supports both <strong>free WHOIS privacy</strong> and <strong>DNS settings</strong>. While the former is only very much recommended, the latter is crucial!</p>
<p>Once you found something you like, go through the purchasing process as with any online purchase.</p>
<doc-anchor-target id="getting-a-vps">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#getting-a-vps">#</doc-anchor-trigger>
        <span>Getting a VPS</span>
    </h2>
</doc-anchor-target>
<p>This is a step with which I can hardly help you. There are countless VPS providers with varying price and quality. Which one you should choose depends on your region of living and your budget. Personally, I&#x27;ve been happy with <a href="https://www.hetzner.com/cloud">Hetzner</a>, who offer hosting in Europe and America. Others that I haven&#x27;t tried, but who are big and known games in the server space, are <a href="https://www.linode.com/products/shared/">Linode</a>, <a href="https://www.hostinger.com/vps-hosting">Hostinger</a>, <a href="https://www.digitalocean.com/solutions/vps-hosting">Digital Ocean</a> and <a href="https://us.ovhcloud.com/vps/">OVHCloud</a>, with many more options when spending some time on Google and in comparisons / benchmarks of different providers in your country. You can also check out <a href="https://lowendtalk.com/">LowEndTalk</a>, which is an online forum for affordable hosting solutions.</p>
<p>The only thing you should really be looking for is a server that supports an Ubuntu image out of the box. I&#x27;ve yet to see a VPS provider that doesn&#x27;t, but still look out for it. Regarding specs, a small spec server is more than enough. I&#x27;ve been running my applications on <strong>2 shared cores, 2GB of RAM and 40GB of storage</strong> without problems. You can obviously go higher if you have the cash to do so.</p>
<p>After you&#x27;ve found a provider you&#x27;re confident in and have purchased the server, you should be presented with an <strong>IP address, a username and a root password</strong>. How you get these differs between providers; sometimes they are laid out in the server dashboard, sometimes you receive them via e-mail.</p>
<p>Once you have these credentials on hand, open the terminal of your choice (<em>CMD</em> on Windows, <em>Terminal</em> on Mac, Linux users know it themselves) and enter the following command:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">ssh root:&lt;root password&gt;@&lt;ip address&gt;</code></pre>
</doc-codeblock></div>
<p>Replace <code v-pre>&lt;root password&gt;</code> and <code v-pre>&lt;ip address&gt;</code> with their respective strings from your server dashboard. After pressing enter and a short pause, you should be connected to your server.</p>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Should this fail, use only <code v-pre>ssh root@&lt;ip address&gt;</code> and enter the root password when prompted.</p>
        </div>
    </div>
</div>
<doc-anchor-target id="securing-the-vps">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#securing-the-vps">#</doc-anchor-trigger>
        <span>Securing the VPS</span>
    </h2>
</doc-anchor-target>
<p>We don&#x27;t want your VPS to be open to the internet or easy to find, do we? Let&#x27;s change some basic settings to make sure the server is tough to find and even tougher to hack.</p>
<doc-anchor-target id="generating-and-installing-ssh-keys">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#generating-and-installing-ssh-keys">#</doc-anchor-trigger>
        <span>Generating and installing SSH keys</span>
    </h3>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>This step assumes you&#x27;ve never set up SSH keys before. If you have, make sure to not overwrite your existing keys!</p>
        </div>
    </div>
</div>
<p>As our first step, we&#x27;re going to <strong>generate and install</strong> an SSH certificate. This is a much safer authentification method compared to passwords, and you won&#x27;t even have to enter anything when connecting to your server.
To start, you&#x27;re gonna disconnect from the server with the <code v-pre>exit</code> command. Now, back in your local machines&#x27; terminal, run <code v-pre>ssh-keygen -b 4096</code>. When asked for a filepath, press enter <strong>if you don&#x27;t already have SSH keys with the default name</strong>, or feel free to enter another save location. When asked for a passphrase, simply press enter twice, entering nothing.
If everything went fine, the command will display the output paths for two files, along some other unrequired details.</p>
<p>Now, run the command <code v-pre>ssh-copy-id -f .ssh/id_rsa.pub root@&lt;ip address&gt;</code>, press enter, paste the root password once more, and the command should exit without errors. Should you have used another save location or file name when generating the SSH key, use that in place of <code v-pre>.ssh/id_rsa.pub</code>. In any case, use the file ending in <code v-pre>.pub</code>, <strong>not the file without a file extension!</strong></p>
<doc-anchor-target id="securing-the-ssh-access">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#securing-the-ssh-access">#</doc-anchor-trigger>
        <span>Securing the SSH access</span>
    </h3>
</doc-anchor-target>
<p>
<div class="mb-6 px-5 py-4 flex justify-between relative border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded transition-colors duration-150">
    <div class="flex items-center text-blue-500 dark:text-blue-400">
        <span class="inline-block mb-px">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" role="presentation" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z"/></svg>
        </span>
        <span class="inline-block font-medium ml-2">Source Guide</span>
    </div>
    <div class="flex items-center text-xs text-gray-400 dark:text-dark-400">
        <span>https://linuxize.com/post/how-to-change-ssh-port-in-linux/</span>
    </div>
    <a href="https://linuxize.com/post/how-to-change-ssh-port-in-linux/" class="absolute block inset-0"></a>
</div>
</p>
<p>Now, we&#x27;re going to lock down your server to make finding it much harder for bots scouring the internet. Connect to your server with the same SSH command as before, and enter the root password if prompted.
Once you&#x27;re connected, run <code v-pre>nano /etc/ssh/sshd_config</code>, which will open a long text file. Here, find the following lines, remove the leading # and change the values as written:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">Port &lt;any number between 1024 and 65536&gt;
PermitRootLogin prohibit-password
PasswordAuthentication no
PermitEmptyPasswords no
X11Forwarding no</code></pre>
</doc-codeblock></div>
<p>Make sure that these lines only exist once in the config file - I&#x27;ve seen them duplicated at the end of the file for some server hosters. Should that be the case, delete these duplicated lines using <code v-pre>CTRL+Shift+K</code>. Once you&#x27;ve changed the settings, press <code v-pre>CTRL+X</code> followed by <code v-pre>y</code> to save and exit. Then, run <code v-pre>systemctl restart ssh</code> to apply the changes.
To verify that SSH daemon is now listening on the new port, run <code v-pre>lsof -Pni | grep sshd</code>, which should return something like this:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">sshd    24167    root  3u  IPv4  99527151   0t0  TCP *:4334 (LISTEN)
sshd    24167    root  4u  IPv6  99527153   0t0  TCP *:4334 (LISTEN)
sshd    29370    root  4u  IPv4  10998432   0t0  TCP 172.0.0.1:4334-&gt;56.223.57.86:51434 (ESTABLISHED)</code></pre>
</doc-codeblock></div>
<p>Where <code v-pre>4334</code> would be the port you&#x27;ve specified.</p>
<p>To finish this this section, disconnect from the server once more, returning to your local terminal, and run the command <code v-pre>nano .ssh/config</code>.</p>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>This command will not work on Windows, and I don&#x27;t know which command will. Feel free to make a PR adding this info. Until then, you can</p>
        </div>
    </div>
</div>
<p>An empty text editor should open, in which you will paste the following text:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">Host &lt;server name&gt;
  HostName &lt;ip address&gt;
  User root
  Port &lt;SSH port&gt;
  IdentityFile ~/.ssh/id_rsa</code></pre>
</doc-codeblock></div>
<p>Replace the <server name> with any memorable shorthand you want - you will use it to connect to the server in the future. Also enter the servers&#x27; IP address and the SSH port you&#x27;ve specified before, and make sure the SSH key location is correct. Once done, leave the editor with the same keybinds as before (<code v-pre>CTRL+Shift+X</code> followed by <code v-pre>y</code>).</p>
<p>From now on, to connect to the server, all you need to enter is <code v-pre>ssh &lt;server name&gt;</code>! So, as an example, if you called the server &quot;vps&quot; in your config, you&#x27;d enter <code v-pre>ssh vps</code>, press enter, and connect in a matter of seconds, without ever needing a password.</p>
<doc-anchor-target id="connecting-your-domain-and-vps-via-cloudflare">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#connecting-your-domain-and-vps-via-cloudflare">#</doc-anchor-trigger>
        <span>Connecting your Domain and VPS via Cloudflare</span>
    </h2>
</doc-anchor-target>
<p>
<div class="mb-6 px-5 py-4 flex justify-between relative border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded transition-colors duration-150">
    <div class="flex items-center text-blue-500 dark:text-blue-400">
        <span class="inline-block mb-px">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" role="presentation" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z"/></svg>
        </span>
        <span class="inline-block font-medium ml-2">Official Docs</span>
    </div>
    <div class="flex items-center text-xs text-gray-400 dark:text-dark-400">
        <span>https://developers.cloudflare.com/learning-paths/get-started/#live_website</span>
    </div>
    <a href="https://developers.cloudflare.com/learning-paths/get-started/#live_website" class="absolute block inset-0"></a>
</div>
</p>
<p>To access your services with your domain name, we need to connect one to the other first. To help us do this <strong>securely</strong>, we&#x27;ll make use of Cloudflare&#x27;s DNS Proxy service, which will hide your server IP from anyone accessing your domain, increasing security by obfuscation. To start, go to <a href="https://dash.cloudflare.com/sign-up">https://dash.cloudflare.com/sign-up</a> and create an account.</p>
<p>Once you&#x27;re in the dashboard, click &quot;Add Site&quot;, enter the domain name you&#x27;ve chosen before and select the free plan when prompted. On the next page, you should be confronted with the DNS entries on the domain - of which you probably have none. Should there be any A or AAAA entries, remove them, then add new ones, providing your servers IP address.</p>
<ul>
<li>use A entries for IPv4 (123.456.78.9)</li>
<li>use AAAA entries for IPv6 (2a02:81b4:c0:27:b227:9b:::)</li>
</ul>
<p>For each IPv4 and IPv6, make two DNS entries - one using <code v-pre>@</code> as name, and one using <code v-pre>*</code>. This ensures that <strong>every</strong> request gets directed at your server, no matter what.</p>
<p>Once you&#x27;re done, confirm and make note of the following page. You will now need to go to the provider where you&#x27;ve bought your domain name, and find the DNS settings panel. You&#x27;re looking for the setting to change the <strong>domains&#x27; nameservers</strong>. Change them according to Cloudflares&#x27; instructions, and confirm on the Cloudflare page once you&#x27;re done. This change can take some time to propagate. You&#x27;ll need a bit of patience until it comes through, but Cloudflare will send you an e-mail once it&#x27;s completed.</p>
<p>While this is processing, you can click through the different menus of the page and get an overview of all the things you can change. Feel free to change what you&#x27;re confident you understand, or read along on the next section.</p>

                                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results />
                            </div>
                            <footer class="clear-both">
                                <div class="flex flex-wrap items-center justify-between mt-14">
                                    <a class="my-2.5 inline-flex items-center text-sm whitespace-nowrap text-blue-500 dark:text-blue-400 hover:text-blue-700 hover:underline" href="https://github.com/justrainer/selfhost-guides/blob/main/src/first-steps/1-vps-setup.md" target="_blank" rel="noopener">
                                        <svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M20 12c-.55 0-1 .45-1 1v7c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h7c.55 0 1-.45 1-1s-.45-1-1-1H4C2.35 3 1 4.35 1 6v14c0 1.65 1.35 3 3 3h14c1.65 0 3-1.35 3-3v-7c0-.55-.45-1-1-1z" /><path d="M22.21 1.79c-1.18-1.18-3.24-1.18-4.41 0l-9.5 9.5c-.13.13-.22.29-.26.46l-1 4c-.08.34.01.7.26.95.18.2.44.3.7.3.08 0 .16-.01.24-.03l4-1c.18-.04.34-.13.46-.26l9.5-9.5c1.22-1.22 1.22-3.2.01-4.42zm-1.42 3l-9.3 9.3-2.11.53.53-2.11 9.3-9.3c.42-.42 1.16-.42 1.59 0 .43.43.43 1.15-.01 1.58z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        <span>Edit on GitHub</span>
                                    </a>
                                </div>
                            
                                <nav class="flex mt-14">
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../../">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                            <span>
                                                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Previous</span>
                                                <span class="block mt-1">Introduction</span>
                                            </span>
                                        </a>
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../../first-steps/2-docker-setup/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                                                <span class="block mt-1">Docker Setup</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div class="border-t dark:border-dark-650 pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between">
                                <div>
                                    <ul class="flex flex-wrap items-center text-sm">
                                    </ul>
                                </div>
                                <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>Â© Copyright 2023. All rights reserved.</p></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="docs-overlay-target"></div>

    <script>window.__DOCS__ = { "title": "Initial VPS Setup", level: 2, icon: "file", hasPrism: false, hasMermaid: false, hasMath: false }</script>
</body>
</html>
